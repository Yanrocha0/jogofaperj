<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jogo da Mem√≥ria - Qu√≠mica</title>
  <link rel="stylesheet" href="memory.css">
</head>
<body>
  <div id="particles-js"></div>
  
  <div class="floating-elements">
    <div class="floating-element" style="top: 10%; left: 5%;">‚öóÔ∏è</div>
    <div class="floating-element" style="top: 20%; left: 80%;">üß™</div>
    <div class="floating-element" style="top: 70%; left: 10%;">üî¨</div>
    <div class="floating-element" style="top: 80%; left: 85%;">üß´</div>
    
    <div class="molecule" style="top: 30%; left: 20%;">
      <div class="atom"></div><div class="atom"></div><div class="atom"></div><div class="atom"></div><div class="atom"></div>
    </div>
    
    <div class="molecule" style="top: 60%; left: 70%;">
      <div class="atom"></div><div class="atom"></div><div class="atom"></div><div class="atom"></div><div class="atom"></div>
    </div>
  </div>
  
  <div class="game-container">
    <button class="home-btn" onclick="goToHome()" title="Voltar para o In√≠cio">üè†</button>
    
    <h2>Jogo da Mem√≥ria - Qu√≠mica</h2>
    
    <div id="setup-screen">
      <p>Combine os conceitos de qu√≠mica org√¢nica e inorg√¢nica com suas defini√ß√µes ou exemplos.</p>
      
      <div class="difficulty-selector">
        <button class="difficulty-btn difficulty-extreme-easy" onclick="setDifficulty('extreme-easy')">Ext. F√°cil (2 pares)</button>
        <button class="difficulty-btn difficulty-easy" onclick="setDifficulty('easy')">F√°cil (4 pares)</button>
        <button class="difficulty-btn difficulty-medium" onclick="setDifficulty('medium')">Mediano (6 pares)</button>
        <button class="difficulty-btn difficulty-hard" onclick="setDifficulty('hard')">Dif√≠cil (8 pares)</button>
        <button class="difficulty-btn difficulty-extreme" onclick="setDifficulty('extreme')">Ext. Dif√≠cil (10 pares)</button>
      </div>
      
      <button class="game-btn" onclick="startGame()">Iniciar Jogo</button>
    </div>
    
    <div id="game-screen" style="display: none;">
      <div class="stats">
        <div><span>üîç Tentativas:</span> <span id="attempts">0</span></div>
        <div><span>‚è±Ô∏è Tempo:</span> <span id="timer">00:00</span></div>
        <div><span>üéØ Acertos:</span> <span id="matches">0</span></div>
      </div>
      
      <div class="memory-board" id="memory-board"></div>
      
      <div class="button-group">
        <button class="game-btn" onclick="restartGame()">Reiniciar</button>
        <button class="game-btn" onclick="newGame()">Novo Jogo</button>
        <button class="hint-btn" id="hint-btn" onclick="giveHint()">Dica</button>
      </div>
    </div>
    
    <div id="result-screen" class="result-container">
      <h3>Parab√©ns! üéâ</h3>
      <div class="result-stats">
        <div><span>Pares encontrados:</span> <span id="final-matches">0</span></div>
        <div><span>Tentativas:</span> <span id="final-attempts">0</span></div>
        <div><span>Tempo total:</span> <span id="final-time">00:00</span></div>
        <div><span>Dificuldade:</span> <span id="final-difficulty">F√°cil</span></div>
      </div>
      <div class="button-group">
        <button class="game-btn" onclick="restartGame()">Jogar Novamente</button>
        <button class="game-btn" onclick="newGame()">Nova Partida</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    // Configura√ß√£o das part√≠culas como mol√©culas
    particlesJS("particles-js", {
      "particles": { 
        "number": { 
          "value": 30, 
          "density": { 
            "enable": true, 
            "value_area": 800 
          } 
        }, 
        "color": { 
          "value": "#1abc9c" 
        }, 
        "shape": { 
          "type": "circle", 
          "stroke": { 
            "width": 0, 
            "color": "#000000" 
          }, 
          "polygon": { 
            "nb_sides": 6 
          } 
        }, 
        "opacity": { 
          "value": 0.5, 
          "random": true, 
          "anim": { 
            "enable": true, 
            "speed": 1, 
            "opacity_min": 0.1, 
            "sync": false 
          } 
        }, 
        "size": { 
          "value": 8, 
          "random": true, 
          "anim": { 
            "enable": true, 
            "speed": 2, 
            "size_min": 3, 
            "sync": false 
          } 
        }, 
        "line_linked": { 
          "enable": true, 
          "distance": 200, 
          "color": "#3498db", 
          "opacity": 0.4, 
          "width": 2 
        }, 
        "move": { 
          "enable": true, 
          "speed": 1.5, 
          "direction": "none", 
          "random": true, 
          "straight": false, 
          "out_mode": "bounce", 
          "bounce": true, 
          "attract": { 
            "enable": true, 
            "rotateX": 600, 
            "rotateY": 1200 
          } 
        } 
      }, 
      "interactivity": { 
        "detect_on": "canvas", 
        "events": { 
          "onhover": { 
            "enable": true, 
            "mode": "grab" 
          }, 
          "onclick": { 
            "enable": true, 
            "mode": "push" 
          }, 
          "resize": true 
        }, 
        "modes": { 
          "grab": { 
            "distance": 200, 
            "line_linked": { 
              "opacity": 1 
            } 
          }, 
          "bubble": { 
            "distance": 400, 
            "size": 40, 
            "duration": 2, 
            "opacity": 8, 
            "speed": 3 
          }, 
          "repulse": { 
            "distance": 200, 
            "duration": 0.4 
          }, 
          "push": { 
            "particles_nb": 4 
          }, 
          "remove": { 
            "particles_nb": 2 
          } 
        } 
      }, 
      "retina_detect": true
    });

    // Conte√∫do do jogo - pares de qu√≠mica org√¢nica e inorg√¢nica
    const chemistryPairs = [
      { front: "Etanol (CH‚ÇÉCH‚ÇÇOH)", back: "√Ålcool presente em bebidas e combust√≠vel" },
      { front: "√Åcido ac√©tico (CH‚ÇÉCOOH)", back: "Componente principal do vinagre" },
      { front: "Acetona (CH‚ÇÉCOCH‚ÇÉ)", back: "Solvente comum em removedor de esmalte" },
      { front: "Formalde√≠do (HCHO)", back: "Alde√≠do usado em conserva√ß√£o de tecidos" },
      { front: "√âter et√≠lico (CH‚ÇÉCH‚ÇÇOCH‚ÇÇCH‚ÇÉ)", back: "Antigo anest√©sico, solvente vol√°til" },
      { front: "Acetato de etila (CH‚ÇÉCOOCH‚ÇÇCH‚ÇÉ)", back: "√âster com cheiro de fruta, usado como solvente" },
      { front: "Metilamina (CH‚ÇÉNH‚ÇÇ)", back: "Amina usada na s√≠ntese de produtos farmac√™uticos" },
      { front: "Metano (CH‚ÇÑ)", back: "Principal componente do g√°s natural" },
      { front: "√ìxido de c√°lcio (CaO)", back: "Cal virgem, usado na constru√ß√£o civil" },
      { front: "√Åcido sulf√∫rico (H‚ÇÇSO‚ÇÑ)", back: "√Åcido forte usado em baterias de carro" },
      { front: "Hidr√≥xido de s√≥dio (NaOH)", back: "Soda c√°ustica, usado em produtos de limpeza" },
      { front: "Cloreto de s√≥dio (NaCl)", back: "Sal de cozinha, essencial para o organismo" },
      { front: "Butano (C‚ÇÑH‚ÇÅ‚ÇÄ)", back: "G√°s de cozinha, combust√≠vel de isqueiros" },
      { front: "Eteno (C‚ÇÇH‚ÇÑ)", back: "G√°s que amadurece frutas, mat√©ria-prima para pl√°sticos" },
      { front: "Etino (C‚ÇÇH‚ÇÇ)", back: "Acetileno, usado em ma√ßaricos para solda" },
      { front: "Fluor (F‚ÇÇ)", back: "Halog√™nio usado em pastas de dente para prevenir c√°ries" },
      { front: "Benzeno (C‚ÇÜH‚ÇÜ)", back: "Hidrocarboneto arom√°tico, solvente industrial" },
      { front: "Glicose (C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ)", back: "A√ß√∫car simples, principal fonte de energia celular" },
      { front: "Am√¥nia (NH‚ÇÉ)", back: "G√°s usado em fertilizantes e produtos de limpeza" },
      { front: "Di√≥xido de carbono (CO‚ÇÇ)", back: "G√°s essencial para fotoss√≠ntese, produto da respira√ß√£o" }
    ];

    // Vari√°veis do jogo
    let cards = [];
    let flippedCards = [];
    let matchedPairs = 0;
    let attempts = 0;
    let gameStarted = false;
    let timerInterval;
    let seconds = 0;
    let currentDifficulty = 'easy';
    let totalPairs = 4;
    let playerName = localStorage.getItem("playerName") || "Jogador";
    let hintUsed = false;

    // Elementos do DOM
    const memoryBoard = document.getElementById('memory-board');
    const attemptsDisplay = document.getElementById('attempts');
    const matchesDisplay = document.getElementById('matches');
    const timerDisplay = document.getElementById('timer');
    const setupScreen = document.getElementById('setup-screen');
    const gameScreen = document.getElementById('game-screen');
    const resultScreen = document.getElementById('result-screen');
    const finalMatches = document.getElementById('final-matches');
    const finalAttempts = document.getElementById('final-attempts');
    const finalTime = document.getElementById('final-time');
    const finalDifficulty = document.getElementById('final-difficulty');
    const hintBtn = document.getElementById('hint-btn');

    // Configurar dificuldade
    function setDifficulty(difficulty) {
      currentDifficulty = difficulty;
      document.querySelectorAll('.difficulty-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      switch(difficulty) {
        case 'extreme-easy':
          totalPairs = 2;
          break;
        case 'easy':
          totalPairs = 4;
          break;
        case 'medium':
          totalPairs = 6;
          break;
        case 'hard':
          totalPairs = 8;
          break;
        case 'extreme':
          totalPairs = 10;
          break;
      }
    }

    // Iniciar jogo
    function startGame() {
      // Embaralhar pares e selecionar os necess√°rios
      const shuffledPairs = [...chemistryPairs].sort(() => 0.5 - Math.random()).slice(0, totalPairs);
      cards = [...shuffledPairs, ...shuffledPairs].sort(() => 0.5 - Math.random());
      
      // Criar tabuleiro
      memoryBoard.innerHTML = '';
      cards.forEach((card, index) => {
        const cardElement = document.createElement('div');
        cardElement.classList.add('memory-card');
        cardElement.dataset.index = index;
        
        const cardFront = document.createElement('div');
        cardFront.classList.add('card-face', 'card-front');
        
        // Adicionar badge de qu√≠mica
        const cardBadge = document.createElement('div');
        cardBadge.classList.add('card-badge');
        cardBadge.textContent = "Qu√≠mica";
        
        const cardTitle = document.createElement('div');
        cardTitle.classList.add('card-title');
        cardTitle.textContent = card.front.split(' (')[0];
        
        const cardFormula = document.createElement('div');
        cardFormula.classList.add('card-content');
        cardFormula.textContent = card.front.match(/\((.*?)\)/)[1];
        
        const cardContent = document.createElement('div');
        cardContent.classList.add('card-content');
        cardContent.textContent = card.back;
        
        cardFront.appendChild(cardBadge);
        cardFront.appendChild(cardTitle);
        cardFront.appendChild(cardFormula);
        cardFront.appendChild(cardContent);
        
        const cardBack = document.createElement('div');
        cardBack.classList.add('card-face', 'card-back');
        
        cardElement.appendChild(cardFront);
        cardElement.appendChild(cardBack);
        cardElement.addEventListener('click', flipCard);
        memoryBoard.appendChild(cardElement);
      });
      
      // Configurar layout do tabuleiro baseado na dificuldade
      let columns;
      switch(currentDifficulty) {
        case 'extreme-easy':
          columns = 2;
          break;
        case 'easy':
          columns = Math.min(4, cards.length/2);
          break;
        case 'medium':
          columns = Math.min(5, cards.length/2);
          break;
        case 'hard':
          columns = Math.min(6, cards.length/2);
          break;
        case 'extreme':
          columns = Math.min(7, cards.length/2);
          break;
      }
      
      // Ajustar para telas pequenas
      if (window.innerWidth < 768) {
        columns = Math.min(4, columns);
      }
      
      memoryBoard.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
      memoryBoard.style.maxWidth = `${columns * 135}px`;
      
      // Mostrar/ocultar bot√£o de dica conforme dificuldade
      hintBtn.style.display = ['hard', 'extreme'].includes(currentDifficulty) ? 'block' : 'none';
      hintBtn.disabled = false;
      hintBtn.textContent = "Dica";
      hintUsed = false;
      
      // Resetar estat√≠sticas
      flippedCards = [];
      matchedPairs = 0;
      attempts = 0;
      seconds = 0;
      attemptsDisplay.textContent = attempts;
      matchesDisplay.textContent = matchedPairs;
      updateTimer();
      
      // Mostrar tela de jogo
      setupScreen.style.display = 'none';
      gameScreen.style.display = 'block';
      resultScreen.style.display = 'none';
      
      // Iniciar timer
      clearInterval(timerInterval);
      gameStarted = true;
      timerInterval = setInterval(() => {
        seconds++;
        updateTimer();
      }, 1000);
    }

    // Virar carta
    function flipCard() {
      if (!gameStarted) return;
      
      const cardIndex = parseInt(this.dataset.index);
      const card = this;
      
      // N√£o fazer nada se a carta j√° estiver virada ou combinada
      if (flippedCards.length === 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
        return;
      }
      
      // Virar a carta
      card.classList.add('flipped');
      flippedCards.push({ index: cardIndex, element: card });
      
      // Verificar se duas cartas est√£o viradas
      if (flippedCards.length === 2) {
        attempts++;
        attemptsDisplay.textContent = attempts;
        
        const card1 = cards[flippedCards[0].index];
        const card2 = cards[flippedCards[1].index];
        
        // Verificar correspond√™ncia ap√≥s um pequeno delay para permitir a anima√ß√£o
        setTimeout(() => {
          if (card1.front === card2.front) {
            // Par encontrado
            matchedPairs++;
            matchesDisplay.textContent = matchedPairs;
            
            flippedCards.forEach(fc => {
              fc.element.classList.add('matched', 'celebrate');
              setTimeout(() => {
                fc.element.classList.remove('celebrate');
              }, 500);
            });
            
            createConfetti(true);
            flippedCards = [];
            
            // Verificar fim do jogo
            if (matchedPairs === totalPairs) {
              endGame();
            }
          } else {
            // Par n√£o encontrado - virar de volta ap√≥s um tempo
            setTimeout(() => {
              flippedCards.forEach(fc => {
                fc.element.classList.remove('flipped');
              });
              flippedCards = [];
            }, 1000);
          }
        }, 500);
      }
    }

    // Dar dica ao jogador (mostrar um par por 2 segundos)
    function giveHint() {
      if (hintUsed || flippedCards.length > 0) return;
      
      hintUsed = true;
      hintBtn.disabled = true;
      hintBtn.textContent = "Dica Usada";
      
      // Encontrar cartas n√£o combinadas e n√£o viradas
      const unflippedCards = Array.from(document.querySelectorAll('.memory-card'))
        .filter(card => !card.classList.contains('flipped') && !card.classList.contains('matched'))
        .map(card => ({
          element: card,
          index: parseInt(card.dataset.index)
        }));
      
      // Agrupar por pares
      const pairs = {};
      unflippedCards.forEach(card => {
        const frontText = cards[card.index].front;
        if (!pairs[frontText]) {
          pairs[frontText] = [];
        }
        pairs[frontText].push(card);
      });
      
      // Encontrar um par completo
      let hintPair = null;
      for (const frontText in pairs) {
        if (pairs[frontText].length >= 2) {
          hintPair = pairs[frontText].slice(0, 2);
          break;
        }
      }
      
      if (hintPair) {
        // Mostrar o par por 2 segundos
        hintPair.forEach(card => {
          card.element.classList.add('flipped', 'hint-active');
        });
        
        setTimeout(() => {
          hintPair.forEach(card => {
            card.element.classList.remove('flipped', 'hint-active');
          });
        }, 2000);
      }
    }

    // Atualizar timer
    function updateTimer() {
      const minutes = Math.floor(seconds / 60);
      const remainingSeconds = seconds % 60;
      timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
    }

    // Finalizar jogo
    function endGame() {
      clearInterval(timerInterval);
      gameStarted = false;
      
      // Mostrar resultados
      finalMatches.textContent = `${matchedPairs} de ${totalPairs}`;
      finalAttempts.textContent = attempts;
      finalTime.textContent = timerDisplay.textContent;
      
      switch(currentDifficulty) {
        case 'extreme-easy':
          finalDifficulty.textContent = 'Ext. F√°cil';
          break;
        case 'easy':
          finalDifficulty.textContent = 'F√°cil';
          break;
        case 'medium':
          finalDifficulty.textContent = 'Mediano';
          break;
        case 'hard':
          finalDifficulty.textContent = 'Dif√≠cil';
          break;
        case 'extreme':
          finalDifficulty.textContent = 'Ext. Dif√≠cil';
          break;
      }
      
      gameScreen.style.display = 'none';
      resultScreen.style.display = 'block';
      
      createConfetti(true);
    }

    // Reiniciar jogo com mesma configura√ß√£o
    function restartGame() {
      // Gerar um novo conjunto de cartas aleat√≥rias
      const shuffledPairs = [...chemistryPairs].sort(() => 0.5 - Math.random()).slice(0, totalPairs);
      cards = [...shuffledPairs, ...shuffledPairs].sort(() => 0.5 - Math.random());
      
      // Reconstruir o tabuleiro com as novas cartas
      memoryBoard.innerHTML = '';
      cards.forEach((card, index) => {
        const cardElement = document.createElement('div');
        cardElement.classList.add('memory-card');
        cardElement.dataset.index = index;
        
        const cardFront = document.createElement('div');
        cardFront.classList.add('card-face', 'card-front');
        
        const cardBadge = document.createElement('div');
        cardBadge.classList.add('card-badge');
        cardBadge.textContent = "Qu√≠mica";
        
        const cardTitle = document.createElement('div');
        cardTitle.classList.add('card-title');
        cardTitle.textContent = card.front.split(' (')[0];
        
        const cardFormula = document.createElement('div');
        cardFormula.classList.add('card-content');
        cardFormula.textContent = card.front.match(/\((.*?)\)/)[1];
        
        const cardContent = document.createElement('div');
        cardContent.classList.add('card-content');
        cardContent.textContent = card.back;
        
        cardFront.appendChild(cardBadge);
        cardFront.appendChild(cardTitle);
        cardFront.appendChild(cardFormula);
        cardFront.appendChild(cardContent);
        
        const cardBack = document.createElement('div');
        cardBack.classList.add('card-face', 'card-back');
        
        cardElement.appendChild(cardFront);
        cardElement.appendChild(cardBack);
        cardElement.addEventListener('click', flipCard);
        memoryBoard.appendChild(cardElement);
      });
      
      // Resetar estat√≠sticas
      flippedCards = [];
      matchedPairs = 0;
      attempts = 0;
      seconds = 0;
      attemptsDisplay.textContent = attempts;
      matchesDisplay.textContent = matchedPairs;
      updateTimer();
      
      // Resetar dica
      hintBtn.disabled = false;
      hintBtn.textContent = "Dica";
      hintUsed = false;
      
      // Mostrar tela de jogo
      setupScreen.style.display = 'none';
      gameScreen.style.display = 'block';
      resultScreen.style.display = 'none';
      
      // Iniciar timer
      clearInterval(timerInterval);
      gameStarted = true;
      timerInterval = setInterval(() => {
        seconds++;
        updateTimer();
      }, 1000);
    }

    // Novo jogo (volta para tela de configura√ß√£o)
    function newGame() {
      setupScreen.style.display = 'block';
      gameScreen.style.display = 'none';
      resultScreen.style.display = 'none';
      clearInterval(timerInterval);
    }

    // Criar efeito de confete
    function createConfetti(success) {
      const colors = success ? 
        ["#1abc9c", "#3498db", "#2980b9", "#2ecc71", "#27ae60"] : 
        ["#e74c3c", "#c0392b", "#d35400", "#e67e22"];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.top = "-10px";
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        confetti.style.width = Math.random() * 10 + 5 + "px";
        confetti.style.height = Math.random() * 10 + 5 + "px";
        confetti.style.opacity = "1";
        
        document.body.appendChild(confetti);
        
        const animationDuration = Math.random() * 3 + 2;
        
        confetti.animate([
          { top: "-10px", opacity: 1 },
          { top: "100vh", opacity: 0 }
        ], {
          duration: animationDuration * 1000,
          easing: "cubic-bezier(0.1, 0.8, 0.9, 1)",
        });
        
        setTimeout(() => {
          confetti.remove();
        }, animationDuration * 1000);
      }
    }

    // Voltar para a tela inicial
    function goToHome() {
      window.location.href = "index.html";
    }

    // Configurar dificuldade padr√£o
    document.addEventListener('DOMContentLoaded', function() {
      // Ativar o bot√£o f√°cil por padr√£o
      document.querySelector('.difficulty-easy').classList.add('active');
    });

    // Ajustar layout quando a janela √© redimensionada
    window.addEventListener('resize', function() {
      if (gameStarted) {
        // Recalcula o layout quando a janela √© redimensionada
        const currentCards = document.querySelectorAll('.memory-card');
        if (currentCards.length > 0) {
          // Reaplica a l√≥gica de colunas
          let columns;
          switch(currentDifficulty) {
            case 'extreme-easy':
              columns = 2;
              break;
            case 'easy':
              columns = Math.min(4, cards.length/2);
              break;
            case 'medium':
              columns = Math.min(5, cards.length/2);
              break;
            case 'hard':
              columns = Math.min(6, cards.length/2);
              break;
            case 'extreme':
              columns = Math.min(7, cards.length/2);
              break;
          }
          
          if (window.innerWidth < 768) {
            columns = Math.min(4, columns);
          }
          
          memoryBoard.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
          memoryBoard.style.maxWidth = `${columns * 135}px`;
        }
      }
    });
  </script>
</body>
</html>